async function loadJson(){let e=await fetch("media_search.json");return(await e.json()).map((e=>({id:e.itemBarcode,name:e.name,authorFirstName:e.authorFirstName,authorLastName:e.authorLastName,location:e.location,category:e.category})))}function loadSearchData(e){return lunr((function(){this.ref("id"),this.field("name",{boost:10}),this.field("authorFirstName",{boost:5}),this.field("authorLastName",{boost:5});for(let a of e)this.add(a)}))}function doSearch(e,a,t){e.preventDefault();let n=$("#searchField").val(),o=document.getElementById("result-list");o.innerHTML="";let s=a.search(n);for(result of(0===s.length&&$(".no-results").removeClass("is-hidden"),s)){let e=result.ref,a=t[e].location.replace(/ /g,""),n=`<li class="has-hover ${a}"><span class="medium-title"><a href="${`location_${a}.html#${e}`}">${t[e].name}</a>`;""!==t[e].authorFirstName&&(n+=` von ${t[e].authorFirstName} ${t[e].authorLastName}`),n+=` <span class="category is-size-7 is-italic">${t[e].category}</span></span><span class="location"> am Standort ${t[e].location}</span></li>`,o.innerHTML+=n}}$(document).ready((async function(){let e=await loadJson(),a=loadSearchData(e),t={};for(let a of e)t[a.id]=a;document.getElementById("search-button").addEventListener("click",(function(e){doSearch(e,a,t)})),document.getElementById("searchField").addEventListener("keydown",(function(e){document.getElementById("searchField").value.length>=3?(document.getElementById("search-button").disabled=!1,$("searchField").removeClass("is-danger"),$("#fourCharWarning").addClass("is-hidden"),13===e.keyCode&&doSearch(e,a,t)):(document.getElementById("search-button").disabled=!0,$("searchField").addClass("is-danger"),$("#fourCharWarning").removeClass("is-hidden"))}))}));
//# sourceMappingURL=search.js.map
